<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Ink/Util/I18n/1/lib.js - Ink.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../yuidoclogo.png" title="Ink.js"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: latest</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/Ink.html">Ink</a></li>
            
                <li><a href="../classes/Ink.Dom.Browser.html">Ink.Dom.Browser</a></li>
            
                <li><a href="../classes/Ink.Dom.Css.html">Ink.Dom.Css</a></li>
            
                <li><a href="../classes/Ink.Dom.Element.html">Ink.Dom.Element</a></li>
            
                <li><a href="../classes/Ink.Dom.Event.html">Ink.Dom.Event</a></li>
            
                <li><a href="../classes/Ink.Dom.FormSerialize.html">Ink.Dom.FormSerialize</a></li>
            
                <li><a href="../classes/Ink.Dom.Loaded.html">Ink.Dom.Loaded</a></li>
            
                <li><a href="../classes/Ink.Dom.Selector.html">Ink.Dom.Selector</a></li>
            
                <li><a href="../classes/Ink.Namespace.ClassModule.html">Ink.Namespace.ClassModule</a></li>
            
                <li><a href="../classes/Ink.Namespace.StaticModule.html">Ink.Namespace.StaticModule</a></li>
            
                <li><a href="../classes/Ink.Net.Ajax.html">Ink.Net.Ajax</a></li>
            
                <li><a href="../classes/Ink.Net.JsonP.html">Ink.Net.JsonP</a></li>
            
                <li><a href="../classes/Ink.UI.Animate_1.html">Ink.UI.Animate_1</a></li>
            
                <li><a href="../classes/Ink.UI.Carousel_1.html">Ink.UI.Carousel_1</a></li>
            
                <li><a href="../classes/Ink.UI.Close.html">Ink.UI.Close</a></li>
            
                <li><a href="../classes/Ink.UI.Common.html">Ink.UI.Common</a></li>
            
                <li><a href="../classes/Ink.UI.DatePicker.html">Ink.UI.DatePicker</a></li>
            
                <li><a href="../classes/Ink.UI.Draggable.html">Ink.UI.Draggable</a></li>
            
                <li><a href="../classes/Ink.UI.Dropdown.html">Ink.UI.Dropdown</a></li>
            
                <li><a href="../classes/Ink.UI.Droppable.html">Ink.UI.Droppable</a></li>
            
                <li><a href="../classes/Ink.UI.FormValidator.html">Ink.UI.FormValidator</a></li>
            
                <li><a href="../classes/Ink.UI.FormValidator_2.html">Ink.UI.FormValidator_2</a></li>
            
                <li><a href="../classes/Ink.UI.ImageQuery.html">Ink.UI.ImageQuery</a></li>
            
                <li><a href="../classes/Ink.UI.Modal.html">Ink.UI.Modal</a></li>
            
                <li><a href="../classes/Ink.UI.Pagination.html">Ink.UI.Pagination</a></li>
            
                <li><a href="../classes/Ink.UI.ProgressBar.html">Ink.UI.ProgressBar</a></li>
            
                <li><a href="../classes/Ink.UI.SmoothScroller.html">Ink.UI.SmoothScroller</a></li>
            
                <li><a href="../classes/Ink.UI.SortableList.html">Ink.UI.SortableList</a></li>
            
                <li><a href="../classes/Ink.UI.Spy.html">Ink.UI.Spy</a></li>
            
                <li><a href="../classes/Ink.UI.Stacker_1.html">Ink.UI.Stacker_1</a></li>
            
                <li><a href="../classes/Ink.UI.Sticky.html">Ink.UI.Sticky</a></li>
            
                <li><a href="../classes/Ink.UI.Swipe.html">Ink.UI.Swipe</a></li>
            
                <li><a href="../classes/Ink.UI.Table.html">Ink.UI.Table</a></li>
            
                <li><a href="../classes/Ink.UI.Tabs.html">Ink.UI.Tabs</a></li>
            
                <li><a href="../classes/Ink.UI.TagField.html">Ink.UI.TagField</a></li>
            
                <li><a href="../classes/Ink.UI.Toggle.html">Ink.UI.Toggle</a></li>
            
                <li><a href="../classes/Ink.UI.Tooltip.html">Ink.UI.Tooltip</a></li>
            
                <li><a href="../classes/Ink.UI.TreeView.html">Ink.UI.TreeView</a></li>
            
                <li><a href="../classes/Ink.Util.Array.html">Ink.Util.Array</a></li>
            
                <li><a href="../classes/Ink.Util.BinPack.html">Ink.Util.BinPack</a></li>
            
                <li><a href="../classes/Ink.Util.Cookie.html">Ink.Util.Cookie</a></li>
            
                <li><a href="../classes/Ink.Util.Date.html">Ink.Util.Date</a></li>
            
                <li><a href="../classes/Ink.Util.Dumper.html">Ink.Util.Dumper</a></li>
            
                <li><a href="../classes/Ink.Util.I18n.html">Ink.Util.I18n</a></li>
            
                <li><a href="../classes/Ink.Util.Json.html">Ink.Util.Json</a></li>
            
                <li><a href="../classes/Ink.Util.String.html">Ink.Util.String</a></li>
            
                <li><a href="../classes/Ink.Util.Url.html">Ink.Util.Url</a></li>
            
                <li><a href="../classes/Ink.Util.Validator.html">Ink.Util.Validator</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/Ink.Dom.Browser_1.html">Ink.Dom.Browser_1</a></li>
            
                <li><a href="../modules/Ink.Dom.Css_1.html">Ink.Dom.Css_1</a></li>
            
                <li><a href="../modules/Ink.Dom.Element_1.html">Ink.Dom.Element_1</a></li>
            
                <li><a href="../modules/Ink.Dom.Event_1.html">Ink.Dom.Event_1</a></li>
            
                <li><a href="../modules/Ink.Dom.FormSerialize.html">Ink.Dom.FormSerialize</a></li>
            
                <li><a href="../modules/Ink.Dom.Loaded_1.html">Ink.Dom.Loaded_1</a></li>
            
                <li><a href="../modules/Ink.Dom.Selector_1.html">Ink.Dom.Selector_1</a></li>
            
                <li><a href="../modules/Ink.Namespace.ClassModule_1.html">Ink.Namespace.ClassModule_1</a></li>
            
                <li><a href="../modules/Ink.Namespace.StaticModule_1.html">Ink.Namespace.StaticModule_1</a></li>
            
                <li><a href="../modules/Ink.Net.Ajax_1.html">Ink.Net.Ajax_1</a></li>
            
                <li><a href="../modules/Ink.Net.JsonP_1.html">Ink.Net.JsonP_1</a></li>
            
                <li><a href="../modules/Ink.UI.Animate_1.html">Ink.UI.Animate_1</a></li>
            
                <li><a href="../modules/Ink.UI.Carousel_1.html">Ink.UI.Carousel_1</a></li>
            
                <li><a href="../modules/Ink.UI.Close_1.html">Ink.UI.Close_1</a></li>
            
                <li><a href="../modules/Ink.UI.Common_1.html">Ink.UI.Common_1</a></li>
            
                <li><a href="../modules/Ink.UI.DatePicker_1.html">Ink.UI.DatePicker_1</a></li>
            
                <li><a href="../modules/Ink.UI.Dropdown_1.html">Ink.UI.Dropdown_1</a></li>
            
                <li><a href="../modules/Ink.UI.Droppable_1.html">Ink.UI.Droppable_1</a></li>
            
                <li><a href="../modules/Ink.UI.FormValidator_1.html">Ink.UI.FormValidator_1</a></li>
            
                <li><a href="../modules/Ink.UI.FormValidator_2.html">Ink.UI.FormValidator_2</a></li>
            
                <li><a href="../modules/Ink.UI.ImageQuery_1.html">Ink.UI.ImageQuery_1</a></li>
            
                <li><a href="../modules/Ink.UI.Modal_1.html">Ink.UI.Modal_1</a></li>
            
                <li><a href="../modules/Ink.UI.Pagination_1.html">Ink.UI.Pagination_1</a></li>
            
                <li><a href="../modules/Ink.UI.ProgressBar_1.html">Ink.UI.ProgressBar_1</a></li>
            
                <li><a href="../modules/Ink.UI.SmoothScroller_1.html">Ink.UI.SmoothScroller_1</a></li>
            
                <li><a href="../modules/Ink.UI.SortableList_1.html">Ink.UI.SortableList_1</a></li>
            
                <li><a href="../modules/Ink.UI.Spy_1.html">Ink.UI.Spy_1</a></li>
            
                <li><a href="../modules/Ink.UI.Stacker_1.html">Ink.UI.Stacker_1</a></li>
            
                <li><a href="../modules/Ink.UI.Sticky_1.html">Ink.UI.Sticky_1</a></li>
            
                <li><a href="../modules/Ink.UI.Swipe.html">Ink.UI.Swipe</a></li>
            
                <li><a href="../modules/Ink.UI.Table_1.html">Ink.UI.Table_1</a></li>
            
                <li><a href="../modules/Ink.UI.Tabs_1.html">Ink.UI.Tabs_1</a></li>
            
                <li><a href="../modules/Ink.UI.Toggle_1.html">Ink.UI.Toggle_1</a></li>
            
                <li><a href="../modules/Ink.UI.Tooltip_1.html">Ink.UI.Tooltip_1</a></li>
            
                <li><a href="../modules/Ink.UI.TreeView_1.html">Ink.UI.TreeView_1</a></li>
            
                <li><a href="../modules/Ink.Util.Array_1.html">Ink.Util.Array_1</a></li>
            
                <li><a href="../modules/Ink.Util.BinPack_1.html">Ink.Util.BinPack_1</a></li>
            
                <li><a href="../modules/Ink.Util.Cookie_1.html">Ink.Util.Cookie_1</a></li>
            
                <li><a href="../modules/Ink.Util.Date_1.html">Ink.Util.Date_1</a></li>
            
                <li><a href="../modules/Ink.Util.Dumper_1.html">Ink.Util.Dumper_1</a></li>
            
                <li><a href="../modules/Ink.Util.I18n_1.html">Ink.Util.I18n_1</a></li>
            
                <li><a href="../modules/Ink.Util.Json_1.html">Ink.Util.Json_1</a></li>
            
                <li><a href="../modules/Ink.Util.String_1.html">Ink.Util.String_1</a></li>
            
                <li><a href="../modules/Ink.Util.Url_1.html">Ink.Util.Url_1</a></li>
            
                <li><a href="../modules/Ink.Util.Validator_1.html">Ink.Util.Validator_1</a></li>
            
                <li><a href="../modules/Ink_1.html">Ink_1</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: Ink/Util/I18n/1/lib.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * @module Ink.Util.I18n_1
 * @author inkdev AT sapo.pt
 */

Ink.createModule(&#x27;Ink.Util.I18n&#x27;, &#x27;1&#x27;, [], function () {
    &#x27;use strict&#x27;;

    var pattrText = /\{(?:(\{.*?})|(?:%s:)?(\d+)|(?:%s)?|([\w-]+))}/g;

    var funcOrVal = function( ret , args ) {
        if ( typeof ret === &#x27;function&#x27; ) {
            return ret.apply(this, args);
        } else if (typeof ret !== undefined) {
            return ret;
        } else {
            return &#x27;&#x27;;
        }
    };

    /**
     * Creates a new internationalization helper object
     *
     * @class Ink.Util.I18n
     * @constructor
     *
     * @param {Object} dict object mapping language codes (in the form of &#x60;pt_PT&#x60;, &#x60;pt_BR&#x60;, &#x60;fr&#x60;, &#x60;en_US&#x60;, etc.) to their Object dictionaries.
     *     @param {Object} dict.(dictionaries...) 
     * @param {String} [lang=&#x27;pt_PT&#x27;] language code of the target language
     *
     * @example
     *      var dictionaries = {    // This could come from a JSONP request from your server
     *          &#x27;pt_PT&#x27;: {
     *              &#x27;hello&#x27;: &#x27;olá&#x27;,
     *              &#x27;me&#x27;: &#x27;eu&#x27;,
     *              &#x27;i have a {} for you&#x27;: &#x27;tenho um {} para ti&#x27; // Old syntax using &#x60;{%s}&#x60; tokens still available
     *          },
     *          &#x27;pt_BR&#x27;: {
     *              &#x27;hello&#x27;: &#x27;oi&#x27;,
     *              &#x27;me&#x27;: &#x27;eu&#x27;,
     *              &#x27;i have a {} for you&#x27;: &#x27;tenho um {} para você&#x27;
     *          }
     *      };
     *      Ink.requireModules([&#x27;Ink.Util.I18n_1&#x27;], function (I18n) {
     *          var i18n = new I18n(dictionaries, &#x27;pt_PT&#x27;);
     *          i18n.text(&#x27;hello&#x27;);  // returns &#x27;olá&#x27;
     *          i18n.text(&#x27;i have a {} for you&#x27;, &#x27;IRON SWORD&#x27;); // returns &#x27;tenho um IRON SWORD&#x27; para ti
     *          
     *          i18n.lang(&#x27;pt_BR&#x27;);  // Changes language. pt_BR dictionary is loaded
     *          i18n.text(&#x27;hello&#x27;);  // returns &#x27;oi&#x27;
     *
     *          i18n.lang(&#x27;en_US&#x27;);  // Missing language.
     *          i18n.text(&#x27;hello&#x27;);  // returns &#x27;hello&#x27;. If testMode is on, returns &#x27;[hello]&#x27;
     *      });
     *      
     *  @example
     *      // The old {%s} syntax from libsapo&#x27;s i18n is still supported
     *      i18n.text(&#x27;hello, {%s}!&#x27;, &#x27;someone&#x27;); // -&gt; &#x27;olá, someone!&#x27;
     */
    var I18n = function( dict , lang , testMode ) {
        if ( !( this instanceof I18n ) ) { return new I18n( dict , lang , testMode ); }

        this.reset( )
            .lang( lang )
            .testMode( testMode )
            .append( dict || { } , lang );
    };

    I18n.prototype = {
        reset: function( ) {
            this._dicts    = [ ];
            this._dict     = { };
            this._testMode = false;
            this._lang     = this._gLang;

            return this;
        },
        /**
         * Adds translation strings for this helper to use.
         *
         * @method append
         * @param {Object} dict object containing language objects identified by their language code
         * @example
         *     var i18n = new I18n({}, &#x27;pt_PT&#x27;);
         *     i18n.append({&#x27;pt_PT&#x27;: {
         *         &#x27;sfraggles&#x27;: &#x27;braggles&#x27;
         *     }});
         *     i18n.text(&#x27;sfraggles&#x27;) // -&gt; &#x27;braggles&#x27;
         */
        append: function( dict ) {
            this._dicts.push( dict );

            this._dict = Ink.extendObj(this._dict , dict[ this._lang ] );

            return this;
        },
        /**
         * Get the language code
         *
         * @returns {String} the language code for this instance
         * @method {String} lang
         */
        /**
         * Set the language. If there are more dictionaries available in cache, they will be loaded.
         *
         * @method  lang
         * @param   lang    {String} Language code to set this instance to.
         */
        lang: function( lang ) {
            if ( !arguments.length ) { return this._lang; }

            if ( lang &amp;&amp; this._lang !== lang ) {
                this._lang = lang;

                this._dict = { };

                for ( var i = 0, l = this._dicts.length; i &lt; l; i++ ) {
                    this._dict = Ink.extendObj( this._dict , this._dicts[ i ][ lang ] || { } );
                }
            }

            return this;
        },
        /**
         * Get the testMode
         *
         * @returns {Boolean} the testMode for this instance
         * @method {Boolean} testMode
         */
        /**
         * Sets or unsets test mode. In test mode, unknown strings are wrapped
         * in &#x60;[ ... ]&#x60;. This is useful for debugging your application and
         * making sure all your translation keys are in place.
         *
         * @method testMode
         * @param {Boolean} bool boolean value to set the test mode to.
         */
        testMode: function( bool ) {
            if ( !arguments.length ) { return !!this._testMode; }

            if ( bool !== undefined  ) { this._testMode = !!bool; }

            return this;
        },

        /**
         * Return an arbitrary key from the current language dictionary
         *
         * @method getKey
         * @param {String} key
         * @return {Any} The object which happened to be in the current language dictionary on the given key.
         *
         * @example
         *      _.getKey(&#x27;astring&#x27;); // -&gt; &#x27;a translated string&#x27;
         *      _.getKey(&#x27;anobject&#x27;); // -&gt; {&#x27;a&#x27;: &#x27;translated object&#x27;}
         *      _.getKey(&#x27;afunction&#x27;); // -&gt; function () { return &#x27;this is a localized function&#x27; }
         */
        getKey: function( key ) {
            var ret;
            var gLang = this._gLang;
            var lang  = this._lang;
    
            if ( key in this._dict ) {
                ret = this._dict[ key ];
            } else {
                I18n.lang( lang );
    
                ret = this._gDict[ key ];
    
                I18n.lang( gLang );
            }
    
            return ret;
        },

        /**
         * Given a translation key, return a translated string, with replaced parameters.
         * When a translated string is not available, the original string is returned unchanged.
         *
         * @method {String} text
         * @param {String} str key to look for in i18n dictionary (which is returned verbatim if unknown)
         * @param {Object} [namedParms] named replacements. Replaces {named} with values in this object.
         * @param {String} [arg1] replacement #1 (replaces first {} and all {1})
         * @param {String} [arg2] replacement #2 (replaces second {} and all {2})
         * @param {String} [argn...] replacement #n (replaces nth {} and all {n})
         *
         * @example
         *      _(&#x27;Gosto muito de {} e o céu é {}.&#x27;, &#x27;carros&#x27;, &#x27;azul&#x27;);
         *      // returns &#x27;Gosto muito de carros e o céu é azul.&#x27;
         *
         * @example
         *      _(&#x27;O {1} é {2} como {2} é a cor do {3}.&#x27;, &#x27;carro&#x27;, &#x27;azul&#x27;, &#x27;FCP&#x27;);
         *      // returns &#x27;O carro é azul como azul é o FCP.&#x27;
         *
         *  @example
         *      _(&#x27;O {person1} dava-se com a {person2}&#x27;, {person1: &#x27;coisinho&#x27;, person2: &#x27;coisinha&#x27;});
         *      // -&gt; &#x27;O coisinho dava-se com a coisinha&#x27;
         *
         *  @example
         *      // This is a bit more complex
         *      var i18n = make().lang(&#x27;pt_PT&#x27;).append({
         *          pt_PT: {
         *              array: [1, 2],
         *              object: {&#x27;a&#x27;: &#x27;-a-&#x27;, &#x27;b&#x27;: &#x27;-b-&#x27;},
         *              func: function (a, b) {return &#x27;[[&#x27; + a + &#x27;,&#x27; + b + &#x27;]]&#x27;;}
         *          }
         *      });
         *      i18n.text(&#x27;array&#x27;, 0); // -&gt; &#x27;1&#x27;
         *      i18n.text(&#x27;object&#x27;, &#x27;a&#x27;); // -&gt; &#x27;-a-&#x27;
         *      i18n.text(&#x27;func&#x27;, &#x27;a&#x27;, &#x27;b&#x27;); // -&gt; &#x27;[[a,b]]&#x27;
         */
        text: function( str /*, replacements...*/ ) {
            if ( typeof str !== &#x27;string&#x27; ) { return; } // Backwards-compat

            var pars = Array.prototype.slice.call( arguments , 1 );
            var idx = 0;
            var isObj = typeof pars[ 0 ] === &#x27;object&#x27;;

            var original = this.getKey( str );
            if ( original === undefined ) { original = this._testMode ? &#x27;[&#x27; + str + &#x27;]&#x27; : str; }
            if ( typeof original === &#x27;number&#x27; ) { original += &#x27;&#x27;; }

            if (typeof original === &#x27;string&#x27;) {
                original = original.replace( pattrText , function( m , $1 , $2 , $3 ) {
                    var ret =
                        $1 ? $1 :
                        $2 ? pars[ $2 - ( isObj ? 0 : 1 ) ] :
                        $3 ? pars[ 0 ][ $3 ] || &#x27;&#x27; :
                             pars[ (idx++) + ( isObj ? 1 : 0 ) ];
                    return funcOrVal( ret , [idx].concat(pars) );
                });
                return original;
            }
             
            return (
                typeof original === &#x27;function&#x27; ? original.apply( this , pars ) :
                original instanceof Array      ? funcOrVal( original[ pars[ 0 ] ] , pars ) :
                typeof original === &#x27;object&#x27;   ? funcOrVal( original[ pars[ 0 ] ] , pars ) :
                                                 &#x27;&#x27;);
        },

        /**
         * Given a singular string, a plural string, and a number, translates
         * either the singular or plural string.
         *
         * @method ntext
         * @return {String}
         *
         * @param {String} strSin   word to use when count is 1
         * @param {String} strPlur  word to use otherwise
         * @param {Number} count    number which defines which word to use
         * @param [...]             extra arguments, to be passed to &#x60;text()&#x60;
         *
         * @example
         *     i18n.ntext(&#x27;platypus&#x27;, &#x27;platypuses&#x27;, 1); // returns &#x27;ornitorrinco&#x27;
         *     i18n.ntext(&#x27;platypus&#x27;, &#x27;platypuses&#x27;, 2); // returns &#x27;ornitorrincos&#x27;
         * 
         * @example
         *     // The &quot;count&quot; argument is passed to text()
         *     i18n.ntext(&#x27;{} platypus&#x27;, &#x27;{} platypuses&#x27;, 1); // returns &#x27;1 ornitorrinco&#x27;
         *     i18n.ntext(&#x27;{} platypus&#x27;, &#x27;{} platypuses&#x27;, 2); // returns &#x27;2 ornitorrincos&#x27;
         */
        ntext: function( strSin , strPlur , count ) {
            var pars = Array.prototype.slice.apply( arguments );
            var original;

            if ( pars.length === 2 &amp;&amp; typeof strPlur === &#x27;number&#x27; ) {
                original = this.getKey( strSin );
                if ( !( original instanceof Array ) ) { return &#x27;&#x27;; }

                pars.splice( 0 , 1 );
                original = original[ strPlur === 1 ? 0 : 1 ];
            } else {
                pars.splice( 0 , 2 );
                original = count === 1 ? strSin : strPlur;
            }

            return this.text.apply( this , [ original ].concat( pars ) );
        },

        /**
         * Returns the ordinal suffix of &#x60;num&#x60; (For example, 1 &gt; &#x27;st&#x27;, 2 &gt; &#x27;nd&#x27;, 5 &gt; &#x27;th&#x27;, ...).
         *
         * This works by using transforms (in the form of Objects or Functions) passed into the
         * function or found in the special key &#x60;_ordinals&#x60; in the active language dictionary.
         *
         * @method ordinal
         *
         * @param {Number}          num             Input number
         * 
         * @param {Object|Function} [options={}]
         *
         *    Maps for translating. Each of these options&#x27; fallback is found in the current
         *    language&#x27;s dictionary. The lookup order is the following:
         *   
         *        1. &#x60;exceptions&#x60;
         *        2. &#x60;byLastDigit&#x60;
         *        3. &#x60;default&#x60;
         *   
         *    Each of these may be either an &#x60;Object&#x60; or a &#x60;Function&#x60;. If it&#x27;s a function, it
         *    is called (with &#x60;number&#x60; and &#x60;digit&#x60; for any function except for byLastDigit,
         *    which is called with the &#x60;lastDigit&#x60; of the number in question), and if the
         *    function returns a string, that is used. If it&#x27;s an object, the property is
         *    looked up using &#x60;[...]&#x60;. If what is found is a string, it is used.
         *
         * @param {Object|Function} [options.byLastDigit={}]
         *    If the language requires the last digit to be considered, mappings of last digits
         *    to ordinal suffixes can be created here.
         *
         * @param {Object|Function} [options.exceptions={}]
         *    Map unique, special cases to their ordinal suffixes.
         *
         * @returns {String}        Ordinal suffix for &#x60;num&#x60;.
         *
         * @example
         *     var i18n = new I18n({
         *         pt_PT: {  // 1º, 2º, 3º, 4º, ...
         *             _ordinal: {  // The _ordinals key each translation dictionary is special.
         *                 &#x27;default&#x27;: &quot;º&quot; // Usually the suffix is &quot;º&quot; in portuguese...
         *             }
         *         },
         *         fr: {  // 1er, 2e, 3e, 4e, ...
         *             _ordinal: {  // The _ordinals key is special.
         *                 &#x27;default&#x27;: &quot;e&quot;, // Usually the suffix is &quot;e&quot; in french...
         *                 exceptions: {
         *                     1: &quot;er&quot;   // ... Except for the number one.
         *                 }
         *             }
         *         },
         *         en_US: {  // 1st, 2nd, 3rd, 4th, ..., 11th, 12th, ... 21st, 22nd...
         *             _ordinal: {
         *                 &#x27;default&#x27;: &quot;th&quot;,// Usually the digit is &quot;th&quot; in english...
         *                 byLastDigit: {
         *                     1: &quot;st&quot;,  // When the last digit is 1, use &quot;th&quot;...
         *                     2: &quot;nd&quot;,  // When the last digit is 2, use &quot;nd&quot;...
         *                     3: &quot;rd&quot;   // When the last digit is 3, use &quot;rd&quot;...
         *                 },
         *                 exceptions: { // But these numbers are special
         *                     0: &quot;&quot;,
         *                     11: &quot;th&quot;,
         *                     12: &quot;th&quot;,
         *                     13: &quot;th&quot;
         *                 }
         *             }
         *         }
         *     }, &#x27;pt_PT&#x27;);
         *
         *     i18n.ordinal(1);    // returns &#x27;º&#x27;
         *     i18n.ordinal(2);    // returns &#x27;º&#x27;
         *     i18n.ordinal(11);   // returns &#x27;º&#x27;
         * 
         *     i18n.lang(&#x27;fr&#x27;);
         *     i18n.ordinal(1);    // returns &#x27;er&#x27;
         *     i18n.ordinal(2);    // returns &#x27;e&#x27;
         *     i18n.ordinal(11);   // returns &#x27;e&#x27;
         *
         *     i18n.lang(&#x27;en_US&#x27;);
         *     i18n.ordinal(1);    // returns &#x27;st&#x27;
         *     i18n.ordinal(2);    // returns &#x27;nd&#x27;
         *     i18n.ordinal(12);   // returns &#x27;th&#x27;
         *     i18n.ordinal(22);   // returns &#x27;nd&#x27;
         *     i18n.ordinal(3);    // returns &#x27;rd&#x27;
         *     i18n.ordinal(4);    // returns &#x27;th&#x27;
         *     i18n.ordinal(5);    // returns &#x27;th&#x27;
         *
         **/
        ordinal: function( num ) {
            if ( num === undefined ) { return &#x27;&#x27;; }

            var lastDig = +num.toString( ).slice( -1 );

            var ordDict  = this.getKey( &#x27;_ordinals&#x27; );
            if ( ordDict === undefined ) { return &#x27;&#x27;; }

            if ( typeof ordDict === &#x27;string&#x27; ) { return ordDict; }

            var ret;

            if ( typeof ordDict === &#x27;function&#x27; ) {
                ret = ordDict( num , lastDig );

                if ( typeof ret === &#x27;string&#x27; ) { return ret; }
            }

            if ( &#x27;exceptions&#x27; in ordDict ) {
                ret = typeof ordDict.exceptions === &#x27;function&#x27; ? ordDict.exceptions( num , lastDig ) :
                      num in ordDict.exceptions                ? funcOrVal( ordDict.exceptions[ num ] , [num , lastDig] ) :
                                                                 undefined;

                if ( typeof ret === &#x27;string&#x27; ) { return ret; }
            }

            if ( &#x27;byLastDigit&#x27; in ordDict ) {
                ret = typeof ordDict.byLastDigit === &#x27;function&#x27; ? ordDict.byLastDigit( lastDig , num ) :
                      lastDig in ordDict.byLastDigit            ? funcOrVal( ordDict.byLastDigit[ lastDig ] , [lastDig , num] ) :
                                                                  undefined;

                if ( typeof ret === &#x27;string&#x27; ) { return ret; }
            }

            if ( &#x27;default&#x27; in ordDict ) {
                ret = funcOrVal( ordDict[&#x27;default&#x27;] , [ num , lastDig ] );

                if ( typeof ret === &#x27;string&#x27; ) { return ret; }
            }

            return &#x27;&#x27;;
        },

        /**
         * Returns an alias to &#x60;text()&#x60;, for convenience. The resulting function is
         * traditionally assigned to &quot;_&quot;.
         *
         * @method alias
         * @returns {Function} an alias to &#x60;text()&#x60;. You can also access the rest of the translation API through this alias.
         *
         * @example
         *     var i18n = new I18n({
         *         &#x27;pt_PT&#x27;: {
         *             &#x27;hi&#x27;: &#x27;olá&#x27;,
         *             &#x27;{} day&#x27;: &#x27;{} dia&#x27;,
         *             &#x27;{} days&#x27;: &#x27;{} dias&#x27;,
         *             &#x27;_ordinals&#x27;: {
         *                 &#x27;default&#x27;: &#x27;º&#x27;
         *             }
         *         }
         *     }, &#x27;pt_PT&#x27;);
         *     var _ = i18n.alias();
         *     _(&#x27;hi&#x27;);  // -&gt; &#x27;olá&#x27;
         *     _(&#x27;{} days&#x27;, 3);  // -&gt; &#x27;3 dias&#x27;
         *     _.ntext(&#x27;{} day&#x27;, &#x27;{} days&#x27;, 2);  // -&gt; &#x27;2 dias&#x27;
         *     _.ntext(&#x27;{} day&#x27;, &#x27;{} days&#x27;, 1);  // -&gt; &#x27;1 dia&#x27;
         *     _.ordinal(3);  // -&gt; &#x27;º&#x27;
         */
        alias: function( ) {
            var ret      = Ink.bind( I18n.prototype.text     , this );
            ret.ntext    = Ink.bind( I18n.prototype.ntext    , this );
            ret.append   = Ink.bind( I18n.prototype.append   , this );
            ret.ordinal  = Ink.bind( I18n.prototype.ordinal  , this );
            ret.testMode = Ink.bind( I18n.prototype.testMode , this );

            return ret;
        }
    };

    /**
     * @static
     * @method I18n.reset
     *
     * Reset I18n global state (global dictionaries, and default language for instances)
     **/
    I18n.reset = function( ) {
        I18n.prototype._gDicts = [ ];
        I18n.prototype._gDict  = { };
        I18n.prototype._gLang  = &#x27;pt_PT&#x27;;
    };
    I18n.reset( );

    /**
     * @static
     * @method I18n.append
     *
     * @param dict {Object}     Dictionary to be added
     * @param lang {String}     Language to be added to
     *
     * Add a dictionary to be used in all I18n instances for the corresponding language
     */
    I18n.append = function( dict , lang ) {
        if ( lang ) {
            if ( !( lang in dict ) ) {
                var obj = { };

                obj[ lang ] = dict;

                dict = obj;
            }

            if ( lang !== I18n.prototype._gLang ) { I18n.lang( lang ); }
        }

        I18n.prototype._gDicts.push( dict );

        Ink.extendObj( I18n.prototype._gDict , dict[ I18n.prototype._gLang ] );
    };

    /**
     * @static
     * @method I18n.lang
     * 
     * @param lang {String} String in the format &#x60;&quot;pt_PT&quot;&#x60;, &#x60;&quot;fr&quot;&#x60;, etc.
     *
     * Set global default language of I18n instances to &#x60;lang&#x60;
     */
    /**
     * @static
     * @method I18n.lang
     *
     * Get the current default language of I18n instances.
     *
     * @return {String} language code
     */
    I18n.lang = function( lang ) {
        if ( !arguments.length ) { return I18n.prototype._gLang; }

        if ( lang &amp;&amp; I18n.prototype._gLang !== lang ) {
            I18n.prototype._gLang = lang;

            I18n.prototype._gDict = { };

            for ( var i = 0, l = I18n.prototype._gDicts.length; i &lt; l; i++ ) {
                Ink.extendObj( I18n.prototype._gDict , I18n.prototype._gDicts[ i ][ lang ] || { } );
            }
        }
    };
    
    return I18n;
});

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
