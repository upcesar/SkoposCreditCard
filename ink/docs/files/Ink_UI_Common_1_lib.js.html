<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Ink/UI/Common/1/lib.js - Ink.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../yuidoclogo.png" title="Ink.js"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: latest</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/Ink.html">Ink</a></li>
            
                <li><a href="../classes/Ink.Dom.Browser.html">Ink.Dom.Browser</a></li>
            
                <li><a href="../classes/Ink.Dom.Css.html">Ink.Dom.Css</a></li>
            
                <li><a href="../classes/Ink.Dom.Element.html">Ink.Dom.Element</a></li>
            
                <li><a href="../classes/Ink.Dom.Event.html">Ink.Dom.Event</a></li>
            
                <li><a href="../classes/Ink.Dom.FormSerialize.html">Ink.Dom.FormSerialize</a></li>
            
                <li><a href="../classes/Ink.Dom.Loaded.html">Ink.Dom.Loaded</a></li>
            
                <li><a href="../classes/Ink.Dom.Selector.html">Ink.Dom.Selector</a></li>
            
                <li><a href="../classes/Ink.Namespace.ClassModule.html">Ink.Namespace.ClassModule</a></li>
            
                <li><a href="../classes/Ink.Namespace.StaticModule.html">Ink.Namespace.StaticModule</a></li>
            
                <li><a href="../classes/Ink.Net.Ajax.html">Ink.Net.Ajax</a></li>
            
                <li><a href="../classes/Ink.Net.JsonP.html">Ink.Net.JsonP</a></li>
            
                <li><a href="../classes/Ink.UI.Animate_1.html">Ink.UI.Animate_1</a></li>
            
                <li><a href="../classes/Ink.UI.Carousel_1.html">Ink.UI.Carousel_1</a></li>
            
                <li><a href="../classes/Ink.UI.Close.html">Ink.UI.Close</a></li>
            
                <li><a href="../classes/Ink.UI.Common.html">Ink.UI.Common</a></li>
            
                <li><a href="../classes/Ink.UI.DatePicker.html">Ink.UI.DatePicker</a></li>
            
                <li><a href="../classes/Ink.UI.Draggable.html">Ink.UI.Draggable</a></li>
            
                <li><a href="../classes/Ink.UI.Dropdown.html">Ink.UI.Dropdown</a></li>
            
                <li><a href="../classes/Ink.UI.Droppable.html">Ink.UI.Droppable</a></li>
            
                <li><a href="../classes/Ink.UI.FormValidator.html">Ink.UI.FormValidator</a></li>
            
                <li><a href="../classes/Ink.UI.FormValidator_2.html">Ink.UI.FormValidator_2</a></li>
            
                <li><a href="../classes/Ink.UI.ImageQuery.html">Ink.UI.ImageQuery</a></li>
            
                <li><a href="../classes/Ink.UI.Modal.html">Ink.UI.Modal</a></li>
            
                <li><a href="../classes/Ink.UI.Pagination.html">Ink.UI.Pagination</a></li>
            
                <li><a href="../classes/Ink.UI.ProgressBar.html">Ink.UI.ProgressBar</a></li>
            
                <li><a href="../classes/Ink.UI.SmoothScroller.html">Ink.UI.SmoothScroller</a></li>
            
                <li><a href="../classes/Ink.UI.SortableList.html">Ink.UI.SortableList</a></li>
            
                <li><a href="../classes/Ink.UI.Spy.html">Ink.UI.Spy</a></li>
            
                <li><a href="../classes/Ink.UI.Stacker_1.html">Ink.UI.Stacker_1</a></li>
            
                <li><a href="../classes/Ink.UI.Sticky.html">Ink.UI.Sticky</a></li>
            
                <li><a href="../classes/Ink.UI.Swipe.html">Ink.UI.Swipe</a></li>
            
                <li><a href="../classes/Ink.UI.Table.html">Ink.UI.Table</a></li>
            
                <li><a href="../classes/Ink.UI.Tabs.html">Ink.UI.Tabs</a></li>
            
                <li><a href="../classes/Ink.UI.TagField.html">Ink.UI.TagField</a></li>
            
                <li><a href="../classes/Ink.UI.Toggle.html">Ink.UI.Toggle</a></li>
            
                <li><a href="../classes/Ink.UI.Tooltip.html">Ink.UI.Tooltip</a></li>
            
                <li><a href="../classes/Ink.UI.TreeView.html">Ink.UI.TreeView</a></li>
            
                <li><a href="../classes/Ink.Util.Array.html">Ink.Util.Array</a></li>
            
                <li><a href="../classes/Ink.Util.BinPack.html">Ink.Util.BinPack</a></li>
            
                <li><a href="../classes/Ink.Util.Cookie.html">Ink.Util.Cookie</a></li>
            
                <li><a href="../classes/Ink.Util.Date.html">Ink.Util.Date</a></li>
            
                <li><a href="../classes/Ink.Util.Dumper.html">Ink.Util.Dumper</a></li>
            
                <li><a href="../classes/Ink.Util.I18n.html">Ink.Util.I18n</a></li>
            
                <li><a href="../classes/Ink.Util.Json.html">Ink.Util.Json</a></li>
            
                <li><a href="../classes/Ink.Util.String.html">Ink.Util.String</a></li>
            
                <li><a href="../classes/Ink.Util.Url.html">Ink.Util.Url</a></li>
            
                <li><a href="../classes/Ink.Util.Validator.html">Ink.Util.Validator</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/Ink.Dom.Browser_1.html">Ink.Dom.Browser_1</a></li>
            
                <li><a href="../modules/Ink.Dom.Css_1.html">Ink.Dom.Css_1</a></li>
            
                <li><a href="../modules/Ink.Dom.Element_1.html">Ink.Dom.Element_1</a></li>
            
                <li><a href="../modules/Ink.Dom.Event_1.html">Ink.Dom.Event_1</a></li>
            
                <li><a href="../modules/Ink.Dom.FormSerialize.html">Ink.Dom.FormSerialize</a></li>
            
                <li><a href="../modules/Ink.Dom.Loaded_1.html">Ink.Dom.Loaded_1</a></li>
            
                <li><a href="../modules/Ink.Dom.Selector_1.html">Ink.Dom.Selector_1</a></li>
            
                <li><a href="../modules/Ink.Namespace.ClassModule_1.html">Ink.Namespace.ClassModule_1</a></li>
            
                <li><a href="../modules/Ink.Namespace.StaticModule_1.html">Ink.Namespace.StaticModule_1</a></li>
            
                <li><a href="../modules/Ink.Net.Ajax_1.html">Ink.Net.Ajax_1</a></li>
            
                <li><a href="../modules/Ink.Net.JsonP_1.html">Ink.Net.JsonP_1</a></li>
            
                <li><a href="../modules/Ink.UI.Animate_1.html">Ink.UI.Animate_1</a></li>
            
                <li><a href="../modules/Ink.UI.Carousel_1.html">Ink.UI.Carousel_1</a></li>
            
                <li><a href="../modules/Ink.UI.Close_1.html">Ink.UI.Close_1</a></li>
            
                <li><a href="../modules/Ink.UI.Common_1.html">Ink.UI.Common_1</a></li>
            
                <li><a href="../modules/Ink.UI.DatePicker_1.html">Ink.UI.DatePicker_1</a></li>
            
                <li><a href="../modules/Ink.UI.Dropdown_1.html">Ink.UI.Dropdown_1</a></li>
            
                <li><a href="../modules/Ink.UI.Droppable_1.html">Ink.UI.Droppable_1</a></li>
            
                <li><a href="../modules/Ink.UI.FormValidator_1.html">Ink.UI.FormValidator_1</a></li>
            
                <li><a href="../modules/Ink.UI.FormValidator_2.html">Ink.UI.FormValidator_2</a></li>
            
                <li><a href="../modules/Ink.UI.ImageQuery_1.html">Ink.UI.ImageQuery_1</a></li>
            
                <li><a href="../modules/Ink.UI.Modal_1.html">Ink.UI.Modal_1</a></li>
            
                <li><a href="../modules/Ink.UI.Pagination_1.html">Ink.UI.Pagination_1</a></li>
            
                <li><a href="../modules/Ink.UI.ProgressBar_1.html">Ink.UI.ProgressBar_1</a></li>
            
                <li><a href="../modules/Ink.UI.SmoothScroller_1.html">Ink.UI.SmoothScroller_1</a></li>
            
                <li><a href="../modules/Ink.UI.SortableList_1.html">Ink.UI.SortableList_1</a></li>
            
                <li><a href="../modules/Ink.UI.Spy_1.html">Ink.UI.Spy_1</a></li>
            
                <li><a href="../modules/Ink.UI.Stacker_1.html">Ink.UI.Stacker_1</a></li>
            
                <li><a href="../modules/Ink.UI.Sticky_1.html">Ink.UI.Sticky_1</a></li>
            
                <li><a href="../modules/Ink.UI.Swipe.html">Ink.UI.Swipe</a></li>
            
                <li><a href="../modules/Ink.UI.Table_1.html">Ink.UI.Table_1</a></li>
            
                <li><a href="../modules/Ink.UI.Tabs_1.html">Ink.UI.Tabs_1</a></li>
            
                <li><a href="../modules/Ink.UI.Toggle_1.html">Ink.UI.Toggle_1</a></li>
            
                <li><a href="../modules/Ink.UI.Tooltip_1.html">Ink.UI.Tooltip_1</a></li>
            
                <li><a href="../modules/Ink.UI.TreeView_1.html">Ink.UI.TreeView_1</a></li>
            
                <li><a href="../modules/Ink.Util.Array_1.html">Ink.Util.Array_1</a></li>
            
                <li><a href="../modules/Ink.Util.BinPack_1.html">Ink.Util.BinPack_1</a></li>
            
                <li><a href="../modules/Ink.Util.Cookie_1.html">Ink.Util.Cookie_1</a></li>
            
                <li><a href="../modules/Ink.Util.Date_1.html">Ink.Util.Date_1</a></li>
            
                <li><a href="../modules/Ink.Util.Dumper_1.html">Ink.Util.Dumper_1</a></li>
            
                <li><a href="../modules/Ink.Util.I18n_1.html">Ink.Util.I18n_1</a></li>
            
                <li><a href="../modules/Ink.Util.Json_1.html">Ink.Util.Json_1</a></li>
            
                <li><a href="../modules/Ink.Util.String_1.html">Ink.Util.String_1</a></li>
            
                <li><a href="../modules/Ink.Util.Url_1.html">Ink.Util.Url_1</a></li>
            
                <li><a href="../modules/Ink.Util.Validator_1.html">Ink.Util.Validator_1</a></li>
            
                <li><a href="../modules/Ink_1.html">Ink_1</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: Ink/UI/Common/1/lib.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * @module Ink.UI.Common_1
 * @author inkdev AT sapo.pt
 * @version 1
 */
Ink.createModule(&#x27;Ink.UI.Common&#x27;, &#x27;1&#x27;, [&#x27;Ink.Dom.Element_1&#x27;, &#x27;Ink.Net.Ajax_1&#x27;,&#x27;Ink.Dom.Css_1&#x27;,&#x27;Ink.Dom.Selector_1&#x27;,&#x27;Ink.Util.Url_1&#x27;], function(InkElement, Ajax,Css,Selector,Url) {

    &#x27;use strict&#x27;;

    var instances = {};
    var lastIdNum = 0;
    var nothing = {} /* a marker, for reference comparison. */;

    var keys = Object.keys || function (obj) {
        var ret = [];
        for (var k in obj) if (obj.hasOwnProperty(k)) {
            ret.push(k);
        }
        return ret;
    };

    /**
     * The Common class provides auxiliar methods to ease some of the most common/repetitive UI tasks.
     *
     * @class Ink.UI.Common
     * @version 1
     * @static
     */
    var Common = {

        /**
         * Supported Ink Layouts
         *
         * @property Layouts
         * @type Object
         * @readOnly
         */
        Layouts: {
            SMALL:  &#x27;small&#x27;,
            MEDIUM: &#x27;medium&#x27;,
            LARGE:  &#x27;large&#x27;
        },

        /**
         * Method to check if an item is a valid DOM Element.
         *
         * @method isDOMElement
         * @static
         * @param {Mixed} o     The object to be checked.
         * @return {Boolean}    True if it&#x27;s a valid DOM Element.
         * @example
         *     var el = Ink.s(&#x27;#element&#x27;);
         *     if( Ink.UI.Common.isDOMElement( el ) === true ){
         *         // It is a DOM Element.
         *     } else {
         *         // It is NOT a DOM Element.
         *     }
         */
        isDOMElement: function(o) {
            return o &amp;&amp; typeof o === &#x27;object&#x27; &amp;&amp; &#x27;nodeType&#x27; in o &amp;&amp; o.nodeType === 1;
        },

        /**
         * Method to check if an item is a valid integer.
         *
         * @method isInteger
         * @static
         * @param {Mixed} n     The value to be checked.
         * @return {Boolean}    True if &#x27;n&#x27; is a valid integer.
         * @example
         *     var value = 1;
         *     if( Ink.UI.Common.isInteger( value ) === true ){
         *         // It is an integer.
         *     } else {
         *         // It is NOT an integer.
         *     }
         */
        isInteger: function(n) {
            return (typeof n === &#x27;number&#x27; &amp;&amp; n % 1 === 0);
        },

        /**
         * Method to get a DOM Element. The first parameter should be either a DOM Element or a valid CSS Selector.
         * If not, then it will throw an exception. Otherwise, it returns a DOM Element.
         *
         * @method elOrSelector
         * @static
         * @param  {DOMElement|String} elOrSelector DOM Element or CSS Selector
         * @param  {String}            fieldName    This field is used in the thrown Exception to identify the parameter.
         * @return {DOMElement} Returns the DOMElement passed or the first result of the CSS Selector. Otherwise it throws an exception.
         * @example
         *     // In case there are several .myInput, it will retrieve the first found
         *     var el = Ink.UI.Common.elOrSelector(&#x27;.myInput&#x27;,&#x27;My Input&#x27;);
         */
        elOrSelector: function(elOrSelector, fieldName) {
            if (!this.isDOMElement(elOrSelector)) {
                var t = Selector.select(elOrSelector);
                if (t.length === 0) { throw new TypeError(fieldName + &#x27; must either be a DOM Element or a selector expression!\nThe script element must also be after the DOM Element itself.&#x27;); }
                return t[0];
            }
            return elOrSelector;
        },

        /**
         * Does the same as &#x60;elOrSelector&#x60; but returns an array of elements.
         *
         * see elOrSelector
         *
         * @method elsOrSelector
         *
         * @static
         *
         * @param ... (See elOrSelector&#x27;s params)
         * @param {Boolean} required If true, accept an empty array as output.
         * @return {Array} The selected DOM Elements.
         * @example
         *     var elements = Ink.UI.Common.elsOrSelector(&#x27;input.my-inputs&#x27;, &#x27;My Input&#x27;);
         */
        elsOrSelector: function(elsOrSelector, fieldName, required) {
            var ret;
            if (typeof elsOrSelector === &#x27;string&#x27;) {
                ret = Selector.select(elsOrSelector);
            } else if (Common.isDOMElement(elsOrSelector)) {
                ret = [elsOrSelector];
            } else if (elsOrSelector &amp;&amp; typeof elsOrSelector === &#x27;object&#x27; &amp;&amp; typeof elsOrSelector.length === &#x27;number&#x27;) {
                ret = elsOrSelector;
            }

            if (ret &amp;&amp; ret.length) {
                return ret;
            } else {
                if (required || arguments.length === 2) {
                    throw new TypeError(fieldName + &#x27; must either be a DOM Element, an Array of elements, or a selector expression!\nThe script element must also be after the DOM Element itself.&#x27;);
                } else {
                    return [];
                }
            }
        },

        /**
         * Get options from an &quot;options&quot; object and the Element&#x27;s data attributes.
         *
         * The element&#x27;s data attributes take precedence.
         * 
         * Values from the element&#x27;s data-atrributes are coerced into the required type.
         *
         * Mainly for Ink UI.* modules
         *
         * @method options
         *
         * @param {Object}     [fieldId=&#x27;&#x27;] Tag used in thrown exceptions: &quot;&lt;fieldId&gt;: ...&quot;
         * @param {Object}      defaults    Object with arrays of option defaults
         * @param {Object}      overrides   Object containing options given from user through JavaScript
         * @param {DOMElement} [element]    Element with data-attributes
         *
         * @example
         *
         *      this._options = Ink.UI.Common.options(&#x27;MyComponent&#x27;, {
         *          &#x27;anobject&#x27;: [&#x27;Object&#x27;, null],  // Defaults to null
         *          &#x27;target&#x27;: [&#x27;Element&#x27;, null],
         *          &#x27;stuff&#x27;: [&#x27;Number&#x27;, 0.1],
         *          &#x27;stuff2&#x27;: [&#x27;Integer&#x27;, 0],
         *          &#x27;doKickFlip&#x27;: [&#x27;Boolean&#x27;, false],
         *          &#x27;targets&#x27;: [&#x27;Elements&#x27;], // Required option since no default was given
         *          &#x27;onClick&#x27;: [&#x27;Function&#x27;, null]
         *      }, options || {}, elm)
         *
         * @example
         *
         * ### Note about booleans
         *
         * Here is how options are read from the markup
         * data-attributes, for several values&#x60;data-a-boolean&#x60;.
         *
         * Options considered true:
         *
         *   - &#x60;data-a-boolean=&quot;true&quot;&#x60;
         *   - (Every other value which is not on the list below.)
         * 
         * Options considered false:
         *
         *   - &#x60;data-a-boolean=&quot;false&quot;&#x60;
         *   - &#x60;data-a-boolean=&quot;&quot;&#x60;
         *   - &#x60;data-a-boolean&#x60;
         *
         * Options which go to default:
         *
         *   - (no attribute). When &#x60;data-a-boolean&#x60; is ommitted, the
         *   option is not considered true nor false, and as such
         *   defaults to what is in the &#x60;defaults&#x60; argument.
         *
         **/
        options: function (fieldId, defaults, overrides, element) {
            if (typeof fieldId !== &#x27;string&#x27;) {
                element = overrides;
                overrides = defaults;
                defaults = fieldId;
                fieldId = &#x27;&#x27;;
            }
            overrides = overrides || {};
            var out = {};
            var dataAttrs = element ? InkElement.data(element) : {};
            var fromDataAttrs;
            var type;
            var lType;
            var defaultVal;

			var invalidStr = function (str) {
                if (fieldId) { str = fieldId + &#x27;: &quot;&#x27; + (&#x27;&#x27; + str).replace(/&quot;/, &#x27;\\&quot;&#x27;) + &#x27;&quot;&#x27;; }
				return str;
			};

			var quote = function (str) {
				return &#x27;&quot;&#x27; + (&#x27;&#x27; + str).replace(/&quot;/, &#x27;\\&quot;&#x27;) + &#x27;&quot;&#x27;;
			};

            var invalidThrow = function (str) {
                throw new Error(invalidStr(str));
            };

            var invalid = function (str) {
                Ink.error(invalidStr(str) + &#x27;. Ignoring option.&#x27;);
            };

            function optionValue(key) {
                type = defaults[key][0];
                lType = type.toLowerCase();
                defaultVal = defaults[key].length === 2 ? defaults[key][1] : nothing;

                if (!type) {
                    invalidThrow(&#x27;Ink.UI.Common.options: Always specify a type!&#x27;);
                }
                if (!(lType in Common._coerce_funcs)) {
                    invalidThrow(&#x27;Ink.UI.Common.options: &#x27; + defaults[key][0] + &#x27; is not a valid type. Use one of &#x27; + keys(Common._coerce_funcs).join(&#x27;, &#x27;));

                }
                if (!defaults[key].length || defaults[key].length &gt; 2) {
                    invalidThrow(&#x27;the &quot;defaults&quot; argument must be an object mapping option names to [typestring, optional] arrays.&#x27;);
                }

                if (key in dataAttrs) {
                    fromDataAttrs = Common._coerce_from_string(lType, dataAttrs[key], key, fieldId);
                    // (above can return &#x60;nothing&#x60;)
                } else {
                    fromDataAttrs = nothing;
                }

                if (fromDataAttrs !== nothing) {
                    if (!Common._options_validate(fromDataAttrs, lType)) {
                        invalid(&#x27;(&#x27; + key + &#x27; option) Invalid &#x27; + lType + &#x27; &#x27; + quote(fromDataAttrs));
                        return defaultVal;
                    } else {
                        return fromDataAttrs;
                    }
                } else if (key in overrides) {
                    return overrides[key];
                } else if (defaultVal !== nothing) {
                    return defaultVal;
                } else {
                    invalidThrow(&#x27;Option &#x27; + key + &#x27; is required!&#x27;);
                }
            }

            for (var key in defaults) {
                if (defaults.hasOwnProperty(key)) {
					out[key] = optionValue(key);
                }
            }

            return out;
        },

        _coerce_from_string: function (type, val, paramName, fieldId) {
            if (type in Common._coerce_funcs) {
                return Common._coerce_funcs[type](val, paramName, fieldId);
            } else {
                return val;
            }
        },

        _options_validate: function (val, type) {
            if (type in Common._options_validate_types) {
                return Common._options_validate_types[type].call(Common, val);
            } else {
                // &#x27;object&#x27; options cannot be passed through data-attributes.
                // Json you say? Not any good to embed in HTML.
                return false;
            }
        },

        _coerce_funcs: (function () {
            var ret = {
                element: function (val) {
                    return Common.elOrSelector(val, &#x27;&#x27;);
                },
                elements: function (val) {
                    return Common.elsOrSelector(val, &#x27;&#x27;, false /*not required, so don&#x27;t throw an exception now*/);
                },
                object: function (val) { return val; },
                number: function (val) { return parseFloat(val); },
                &#x27;boolean&#x27;: function (val) {
                    return !(val === &#x27;false&#x27; || val === &#x27;&#x27; || val === null);
                },
                string: function (val) { return val; },
                &#x27;function&#x27;: function (val, paramName, fieldId) {
					Ink.error(fieldId + &#x27;: You cannot specify the option &quot;&#x27; + paramName + &#x27;&quot; through data-attributes because it\&#x27;s a function&#x27;);
					return nothing;
                }
            };
            ret[&#x27;float&#x27;] = ret.integer = ret.number;
            return ret;
        }()),

        _options_validate_types: (function () {
            var types = {
                string: function (val) {
                    return typeof val === &#x27;string&#x27;;
                },
                number: function (val) {
                    return typeof val === &#x27;number&#x27; &amp;&amp; !isNaN(val) &amp;&amp; isFinite(val);
                },
                integer: function (val) {
                    return val === Math.round(val);
                },
                element: function (val) {
                    return Common.isDOMElement(val);
                },
                elements: function (val) {
                    return val &amp;&amp; typeof val === &#x27;object&#x27; &amp;&amp; typeof val.length === &#x27;number&#x27; &amp;&amp; val.length;
                },
                &#x27;boolean&#x27;: function (val) {
                    return typeof val === &#x27;boolean&#x27;;
                }
            };
            types[&#x27;float&#x27;] = types.number;
            return types;
        }()),

        /**
         * Method to make a deep copy (clone) of an object.
         * Note: The object cannot have loops.
         *
         * @method clone
         * @static
         * @param  {Object} o The object to be cloned/copied.
         * @return {Object} Returns the result of the clone/copy.
         * @example
         *     var originalObj = {
         *         key1: &#x27;value1&#x27;,
         *         key2: &#x27;value2&#x27;,
         *         key3: &#x27;value3&#x27;
         *     };
         *     var cloneObj = Ink.UI.Common.clone( originalObj );
         */
        clone: function(o) {
            try {
                return JSON.parse( JSON.stringify(o) );
            } catch (ex) {
                throw new Error(&#x27;Given object cannot have loops!&#x27;);
            }
        },


        /**
         * Method to return the &#x27;nth&#x27; position that an element occupies relatively to its parent.
         *
         * @method childIndex
         * @static
         * @param  {DOMElement} childEl Valid DOM Element.
         * @return {Number} Numerical position of an element relatively to its parent.
         * @example
         *     &lt;!-- Imagine the following HTML: --&gt;
         *     &lt;ul&gt;
         *       &lt;li&gt;One&lt;/li&gt;
         *       &lt;li&gt;Two&lt;/li&gt;
         *       &lt;li id=&quot;test&quot;&gt;Three&lt;/li&gt;
         *       &lt;li&gt;Four&lt;/li&gt;
         *     &lt;/ul&gt;
         *
         *     &lt;script&gt;
         *         var testLi = Ink.s(&#x27;#test&#x27;);
         *         Ink.UI.Common.childIndex( testLi ); // Returned value: 3
         *     &lt;/script&gt;
         */
        childIndex: function(childEl) {
            if( Common.isDOMElement(childEl) ){
                var els = Selector.select(&#x27;&gt; *&#x27;, childEl.parentNode);
                for (var i = 0, f = els.length; i &lt; f; ++i) {
                    if (els[i] === childEl) {
                        return i;
                    }
                }
            }
            throw &#x27;not found!&#x27;;
        },


        /**
         * This method provides a more convenient way to do an async AJAX request and expect a JSON response.
         * It offers a callback option, as third paramenter, for a better async handling.
         *
         * @method ajaxJSON
         * @static
         * @async
         * @param  {String} endpoint    Valid URL to be used as target by the request.
         * @param  {Object} params      This field is used in the thrown Exception to identify the parameter.
         * @example
         *     // In case there are several .myInput, it will retrieve the first found
         *     var el = Ink.UI.Common.elOrSelector(&#x27;.myInput&#x27;,&#x27;My Input&#x27;);
         */
        ajaxJSON: function(endpoint, params, cb) {
            new Ajax(
                endpoint,
                {
                    evalJS:         &#x27;force&#x27;,
                    method:         &#x27;POST&#x27;,
                    parameters:     params,

                    onSuccess:  function( r) {
                        try {
                            r = r.responseJSON;
                            if (r.status !== &#x27;ok&#x27;) {
                                throw &#x27;server error: &#x27; + r.message;
                            }
                            cb(null, r);
                        } catch (ex) {
                            cb(ex);
                        }
                    },

                    onFailure: function() {
                        cb(&#x27;communication failure&#x27;);
                    }
                }
            );
        },


        /**
         * Method to get the current Ink layout applied.
         *
         * @method currentLayout
         * @static
         * @return {String}         &#x27;small&#x27;, &#x27;medium&#x27; or &#x27;large&#x27;
         * @example
         *      var inkLayout = Ink.UI.Common.currentLayout();
         *      if (inkLayout === &#x27;small&#x27;) {
         *          // ...
         *      }
         */
        currentLayout: function() {
            var i, f, k, v, el, detectorEl = Selector.select(&#x27;#ink-layout-detector&#x27;)[0];
            if (!detectorEl) {
                detectorEl = document.createElement(&#x27;div&#x27;);
                detectorEl.id = &#x27;ink-layout-detector&#x27;;
                for (k in this.Layouts) {
                    if (this.Layouts.hasOwnProperty(k)) {
                        v = this.Layouts[k];
                        el = document.createElement(&#x27;div&#x27;);
                        el.className = &#x27;show-&#x27; + v + &#x27; hide-all&#x27;;
                        el.setAttribute(&#x27;data-ink-layout&#x27;, v);
                        detectorEl.appendChild(el);
                    }
                }
                document.body.appendChild(detectorEl);
            }

            var result = &#x27;&#x27;;
            var resultCount = 0;
            for (i = 0, f = detectorEl.childNodes.length; i &lt; f; ++i) {
                el = detectorEl.childNodes[i];
                if (Css.getStyle(el, &#x27;display&#x27;) === &#x27;block&#x27;) {
                    result = el.getAttribute(&#x27;data-ink-layout&#x27;);
                    resultCount += 1;
                }
            }

            if (resultCount === 1) {
                return result;
            } else {
                return &#x27;large&#x27;;
            }
        },


        /**
         * Method to set the location&#x27;s hash (window.location.hash).
         *
         * @method hashSet
         * @static
         * @param  {Object} o   Object with the info to be placed in the location&#x27;s hash.
         * @example
         *     // It will set the location&#x27;s hash like: &lt;url&gt;#key1=value1&amp;key2=value2&amp;key3=value3
         *     Ink.UI.Common.hashSet({
         *         key1: &#x27;value1&#x27;,
         *         key2: &#x27;value2&#x27;,
         *         key3: &#x27;value3&#x27;
         *     });
         */
        hashSet: function(o) {
            if (typeof o !== &#x27;object&#x27;) { throw new TypeError(&#x27;o should be an object!&#x27;); }
            var hashParams = Url.getAnchorString();
            hashParams = Ink.extendObj(hashParams, o);
            window.location.hash = Url.genQueryString(&#x27;&#x27;, hashParams).substring(1);
        },

        /**
         * Method to remove children nodes from a given object.
         * This method was initially created to help solve a problem in Internet Explorer(s) that occurred when trying
         * to set the innerHTML of some specific elements like &#x27;table&#x27;.
         *
         * @method cleanChildren
         * @static
         * @param  {DOMElement} parentEl Valid DOM Element
         * @example
         *     &lt;!-- Imagine the following HTML: --&gt;
         *     &lt;ul id=&quot;myUl&quot;&gt;
         *       &lt;li&gt;One&lt;/li&gt;
         *       &lt;li&gt;Two&lt;/li&gt;
         *       &lt;li&gt;Three&lt;/li&gt;
         *       &lt;li&gt;Four&lt;/li&gt;
         *     &lt;/ul&gt;
         *
         *     &lt;script&gt;
         *     Ink.UI.Common.cleanChildren( Ink.s( &#x27;#myUl&#x27; ) );
         *     &lt;/script&gt;
         *
         *     &lt;!-- After running it, the HTML changes to: --&gt;
         *     &lt;ul id=&quot;myUl&quot;&gt;&lt;/ul&gt;
         */
        cleanChildren: function(parentEl) {
            if( !Common.isDOMElement(parentEl) ){
                throw &#x27;Please provide a valid DOMElement&#x27;;
            }
            var prevEl, el = parentEl.lastChild;
            while (el) {
                prevEl = el.previousSibling;
                parentEl.removeChild(el);
                el = prevEl;
            }
        },

        /**
         * This method stores the id and/or the classes of a given element in a given object.
         *
         * @method storeIdAndClasses
         * @static
         * @param  {DOMElement} fromEl    Valid DOM Element to get the id and classes from.
         * @param  {Object}     inObj     Object where the id and classes will be saved.
         * @example
         *     &lt;div id=&quot;myDiv&quot; class=&quot;aClass&quot;&gt;&lt;/div&gt;
         *
         *     &lt;script&gt;
         *         var storageObj = {};
         *         Ink.UI.Common.storeIdAndClasses( Ink.s(&#x27;#myDiv&#x27;), storageObj );
         *         // storageObj changes to:
         *         {
         *           _id: &#x27;myDiv&#x27;,
         *           _classes: &#x27;aClass&#x27;
         *         }
         *     &lt;/script&gt;
         */
        storeIdAndClasses: function(fromEl, inObj) {
            if( !Common.isDOMElement(fromEl) ){
                throw &#x27;Please provide a valid DOMElement as first parameter&#x27;;
            }

            var id = fromEl.id;
            if (id) {
                inObj._id = id;
            }

            var classes = fromEl.className;
            if (classes) {
                inObj._classes = classes;
            }
        },

        /**
         * This method sets the id and className properties of a given DOM Element based on a given similar object
         * resultant of the previous function &#x27;storeIdAndClasses&#x27;.
         *
         * @method restoreIdAndClasses
         * @static
         * @param  {DOMElement} toEl    Valid DOM Element to set the id and classes on.
         * @param  {Object}     inObj   Object where the id and classes to be set are.
         * @example
         *     &lt;div&gt;&lt;/div&gt;
         *
         *     &lt;script&gt;
         *         var storageObj = {
         *           _id: &#x27;myDiv&#x27;,
         *           _classes: &#x27;aClass&#x27;
         *         };
         *
         *         Ink.UI.Common.storeIdAndClasses( Ink.s(&#x27;div&#x27;), storageObj );
         *     &lt;/script&gt;
         *
         *     &lt;!-- After the code runs the div element changes to: --&gt;
         *     &lt;div id=&quot;myDiv&quot; class=&quot;aClass&quot;&gt;&lt;/div&gt;
         */
        restoreIdAndClasses: function(toEl, inObj) {

            if( !Common.isDOMElement(toEl) ){
                throw &#x27;Please provide a valid DOMElement as first parameter&#x27;;
            }

            if (inObj._id &amp;&amp; toEl.id !== inObj._id) {
                toEl.id = inObj._id;
            }

            if (inObj._classes &amp;&amp; toEl.className.indexOf(inObj._classes) === -1) {
                if (toEl.className) { toEl.className += &#x27; &#x27; + inObj._classes; }
                else {                toEl.className  =       inObj._classes; }
            }

            if (inObj._instanceId &amp;&amp; !toEl.getAttribute(&#x27;data-instance&#x27;)) {
                toEl.setAttribute(&#x27;data-instance&#x27;, inObj._instanceId);
            }
        },

        /**
         * This method saves a component&#x27;s instance reference for later retrieval.
         *
         * @method registerInstance
         * @static
         * @param  {Object}     inst                Object that holds the instance.
         * @param  {DOMElement} el                  DOM Element to associate with the object.
         * @param  {Object}     [optionalPrefix]    Defaults to &#x27;instance&#x27;
         */
        registerInstance: function(inst, el, optionalPrefix) {
            if (inst._instanceId) { return; }

            if (typeof inst !== &#x27;object&#x27;) { throw new TypeError(&#x27;1st argument must be a JavaScript object!&#x27;); }

            if (inst._options &amp;&amp; inst._options.skipRegister) { return; }

            if (!this.isDOMElement(el)) { throw new TypeError(&#x27;2nd argument must be a DOM element!&#x27;); }
            if (optionalPrefix !== undefined &amp;&amp; typeof optionalPrefix !== &#x27;string&#x27;) { throw new TypeError(&#x27;3rd argument must be a string!&#x27;); }
            var id = (optionalPrefix || &#x27;instance&#x27;) + (++lastIdNum);
            instances[id] = inst;
            inst._instanceId = id;
            var dataInst = el.getAttribute(&#x27;data-instance&#x27;);
            dataInst = (dataInst !== null) ? [dataInst, id].join(&#x27; &#x27;) : id;
            el.setAttribute(&#x27;data-instance&#x27;, dataInst);
        },

        /**
         * This method deletes/destroy an instance with a given id.
         *
         * @method unregisterInstance
         * @static
         * @param  {String}     id       Id of the instance to be destroyed.
         */
        unregisterInstance: function(id) {
            delete instances[id];
        },

        /**
         * This method retrieves the registered instance(s) of a given element or instance id.
         *
         * @method getInstance
         * @static
         * @param  {String|DOMElement}      instanceIdOrElement      Instance&#x27;s id or DOM Element from which we want the instances.
         * @return  {Object|Object[]}       Returns an instance or a collection of instances.
         */
        getInstance: function(instanceIdOrElement) {
            var ids;
            if (this.isDOMElement(instanceIdOrElement)) {
                ids = instanceIdOrElement.getAttribute(&#x27;data-instance&#x27;);
                if (ids === null) { throw new Error(&#x27;argument is not a DOM instance element!&#x27;); }
            }
            else {
                ids = instanceIdOrElement;
            }

            ids = ids.split(&#x27; &#x27;);
            var inst, id, i, l = ids.length;

            var res = [];
            for (i = 0; i &lt; l; ++i) {
                id = ids[i];
                if (!id) { throw new Error(&#x27;Element is not a JS instance!&#x27;); }
                inst = instances[id];
                if (!inst) { throw new Error(&#x27;Instance &quot;&#x27; + id + &#x27;&quot; not found!&#x27;); }
                res.push(inst);
            }

            return (l === 1) ? res[0] : res;
        },

        /**
         * This method retrieves the registered instance(s) of an element based on the given selector.
         *
         * @method getInstanceFromSelector
         * @static
         * @param  {String}             selector    CSS selector to define the element from which it&#x27;ll get the instance(s).
         * @return  {Object|Object[]}               Returns an instance or a collection of instances.
         */
        getInstanceFromSelector: function(selector) {
            var el = Selector.select(selector)[0];
            if (!el) { throw new Error(&#x27;Element not found!&#x27;); }
            return this.getInstance(el);
        },

        /**
         * This method retrieves the registered instances&#x27; ids of all instances.
         *
         * @method getInstanceIds
         * @static
         * @return  {String[]}     Id or collection of ids of all existing instances.
         */
        getInstanceIds: function() {
            var res = [];
            for (var id in instances) {
                if (instances.hasOwnProperty(id)) {
                    res.push( id );
                }
            }
            return res;
        },

        /**
         * This method retrieves all existing instances.
         *
         * @method getInstances
         * @static
         * @return  {Object[]}     Collection of existing instances.
         */
        getInstances: function() {
            var res = [];
            for (var id in instances) {
                if (instances.hasOwnProperty(id)) {
                    res.push( instances[id] );
                }
            }
            return res;
        },

        /**
         * This method is not to supposed to be invoked by the Common component.
         * Components should copy this method as its destroy method.
         *
         * @method destroyComponent
         * @static
         */
        destroyComponent: function() {
            Common.unregisterInstance(this._instanceId);
            this._element.parentNode.removeChild(this._element);
        }

    };

    return Common;

});

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
